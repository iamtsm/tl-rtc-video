!function(e,t){if("object"==typeof exports&&"object"==typeof module)module.exports=t();else if("function"==typeof define&&define.amd)define([],t);else{var o,i=t();for(o in i)("object"==typeof exports?exports:e)[o]=i[o]}}(this,function(){return i={},n.m=o={"../../res/js/index.js":
/*!***********************************************************!*\
  !*** E:/code/tl-open-source/tl-rtc-video/res/js/index.js ***!
  \***********************************************************/
/*! no static exports found */function(e,t){axios.get(window.prefix+"/api/comm/initData",{}).then(e=>{let t=e.data;tlSwiper.init(),tlSwiper.autoPreview(".swiperOther"),tlSwiper.preview(".swiperComment",tlSwiper.VERTICAL),new Vue({el:"#videoApp",data:function(){let e=null;return io&&(e=io(t.wsHost)),{socket:e,socketId:0,config:t.rtcConfig,options:t.options,userMediaConfig:{audio:{echoCancellation:!0},video:!0},createDisabled:!0,exitDisabled:!0,createClass:"layui-btn layui-btn-normal layui-btn-radius",exitClass:"layui-btn layui-btn-danger layui-btn-radius",disableClass:" layui-btn-disabled",showTools:0,selfVideoStyle:"width:80%;margin-left:10%",autoStyle:"",shareClass:"",messageSendTo:"",messageContent:"",roomId:10086,remoteVideoList:[],msgList:[]}},watch:{messageSendTo:function(e,t){console.log(e)},remoteVideoList:{deep:!0,handler:function(e,t){}}},computed:{shareUrl:function(){return tlQrcode.code("https://im.iamtsm.cn/video?roomId="+this.roomId)}},methods:{socketListener:function(){let t=this;tlSocket.onCreated(e=>{console.log("created: "+JSON.stringify(e)),t.socketId=e.id,t.roomId=e.room,tlWebrtc.createPeers(e),t.touchResize()}),tlSocket.onJoined(e=>{console.log("joined: "+JSON.stringify(e)),tlWebrtc.joinPeers(e),t.touchResize()}),tlSocket.onOffer(tlWebrtc.offer),tlSocket.onAnswer(tlWebrtc.answer),tlSocket.onCandidate(tlWebrtc.candidate),tlSocket.onExit(e=>{console.log("exit: "+JSON.stringify(e)),tlWebrtc.removeConnect(e.from),t.touchResize()})},createRoom:function(){this.roomId&&(tlSocket.emitCreateAndJoin({room:this.roomId}),this.createDisabled=!0,this.exitDisabled=!1)},exitRoom:function(){this.roomId&&(tlSocket.emitExit({from:this.socketId,room:this.roomId}),this.createDisabled=!1,this.exitDisabled=!0,this.createClass="layui-btn layui-btn-normal layui-btn-radius",this.exitClass="layui-btn layui-btn-danger layui-btn-radius",this.disableClass=" layui-btn-disabled",this.showTools=0,this.roomId=10086,this.remoteVideoList=[])},sendMsg:function(){this.messageContent="",tlLayer.msg("暂不支持发送")},shareRoom:function(){this.shareClass?this.shareClass="":this.shareClass="shareClass"},handlerRoomHistory:function(){let t=this;var e=window.location.hash||"";e&&e.includes("#")&&((e=e.split("roomId="))&&1<e.length&&(this.roomId=parseInt(e[1]),tlLayer.confirm("进入房间"+this.roomId,e=>{window.location.hash="",tlLayer.close(e),t.joinRoom()},e=>{t.roomId="10086",window.location.hash="",tlLayer.close(e)})))},reCaculateSwiperSize:function(){tlSwiper.autoPreview(".swiperOther");var e=document.body.clientWidth;let t=80-parseInt((e-tlSwiper.MIN_WIDTH)/100)*tlSwiper.SLIDE_COUNT;t<=40&&(t=40),70<=t&&(t=70),e<tlSwiper.MIN_WIDTH?(this.selfVideoStyle="width:80%;",this.selfVideoStyle+="margin-left:10%",this.autoStyle="margin-left:0"):0<this.remoteVideoList.length?(this.selfVideoStyle="width:67%;padding: 15px;",this.autoStyle="margin-left:0"):(this.selfVideoStyle=`width:${t}%;padding: 20px;`,this.selfVideoStyle+=`margin-left:${(100-t)/2}%`,this.autoStyle="margin-left:16.5%")},touchResize:function(){let t=this;setTimeout(()=>{var e=new Event("resize");window.dispatchEvent(e),t.reCaculateSwiperSize()},800)},loadJS:function(e,t){var o=document.createElement("script"),i=t||function(){};o.type="text/javascript",o.readyState?o.onreadystatechange=function(){"loaded"!=o.readyState&&"complete"!=o.readyState||(o.onreadystatechange=null,i())}:o.onload=function(){i()},o.src=e,document.getElementsByTagName("head")[0].appendChild(o)}},created:function(){let e=this;window.location.hash&&window.location.hash.includes("debug")&&this.loadJS("/static/js/vconsole.min.js",function(){e.loadJS("/static/js/vconsole.js",function(){console.log("load vconsole success")})})},mounted:function(){let t=this;window.onresize=this.reCaculateSwiperSize,this.reCaculateSwiperSize(),tlVue.init(),tlSocket.init(this.socket,this.socketId),tlWebrtc.init(this.config,this.options,null,[]),tlRoom.init(t.roomId,e=>{t.createDisabled=!e}),tlVue.Bus.$on("addConnect",e=>{t.remoteVideoList=e}),this.socketListener(),setTimeout(()=>{t.handlerRoomHistory()},200)},destroyed:function(){}})})}},n.c=i,n.d=function(e,t,o){n.o(e,t)||Object.defineProperty(e,t,{enumerable:!0,get:o})},n.r=function(e){"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},n.t=function(t,e){if(1&e&&(t=n(t)),8&e)return t;if(4&e&&"object"==typeof t&&t&&t.__esModule)return t;var o=Object.create(null);if(n.r(o),Object.defineProperty(o,"default",{enumerable:!0,value:t}),2&e&&"string"!=typeof t)for(var i in t)n.d(o,i,function(e){return t[e]}.bind(null,i));return o},n.n=function(e){var t=e&&e.__esModule?function(){return e.default}:function(){return e};return n.d(t,"a",t),t},n.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},n.p="",n(n.s="../../res/js/index.js");function n(e){if(i[e])return i[e].exports;var t=i[e]={i:e,l:!1,exports:{}};return o[e].call(t.exports,t,t.exports,n),t.l=!0,t.exports}var o,i});